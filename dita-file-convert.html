<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Professional DITA Studio</title>
<style>
body { font-family: 'Times New Roman', serif; margin:0; padding:20px; background:#f7f7f7;}
h1,h2,h3,h4,h5 { color:#222; margin:10px 0;}
p { line-height:1.6; color:#333; margin:6px 0;}
.note { display:block; background:#fff8d1; border-left:6px solid #f4c430; padding:10px; margin:10px 0; font-style:italic;}
.codeblock, pre { display:block; background:#272822; color:#f8f8f2; padding:10px; overflow-x:auto; border-radius:4px; font-family:monospace; white-space:pre-wrap; margin:10px 0;}
table { border-collapse:collapse; margin:15px 0; width:100%; }
table, th, td { border:1px solid #888;}
th, td { padding:8px 12px; text-align:left; font-size:14px;}
img { max-width:100%; margin:10px 0;}
button { margin:5px 2px; padding:8px 12px; background:#4CAF50; color:#fff; border:none; cursor:pointer; border-radius:4px;}
button:hover { background:#45a049;}
.output-container { background:white; padding:20px; border-radius:6px; box-shadow:0 2px 6px rgba(0,0,0,0.2); width:100%; box-sizing:border-box; margin-top:20px;}
.editor-container { display:flex; gap:20px; margin-top:20px;}
textarea { width:50%; height:400px; padding:10px; font-family:monospace; resize:vertical;}
</style>
</head>
<body>

<h1>Professional DITA Studio</h1>

<!-- ---------- File Upload Section ---------- -->
<h2>Upload DITA XML</h2>
<input type="file" id="ditaFile" accept=".xml,.dita">
<br>
<button onclick="convertDITA()">Convert</button>
<button onclick="downloadPDF('output','dita-output.pdf')">Download as PDF</button>
<button onclick="downloadHTML('output','dita-output.html')">Download as HTML</button>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
<script>
// -------------------- DITA File Upload --------------------
let renderedHTML = "";
let currentFileName = "dita-output";

function convertDITA() {
    const fileInput = document.getElementById('ditaFile');
    if(!fileInput.files.length){ alert("Please select a DITA XML file first."); return; }
    currentFileName = fileInput.files[0].name.replace(/\.[^/.]+$/,"");
    const reader = new FileReader();
    reader.onload = function(e){
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(e.target.result,"application/xml");
        if(xmlDoc.getElementsByTagName("parsererror").length){ alert("Invalid XML file."); return; }
        renderedHTML = transformDITA(xmlDoc);
        document.getElementById("output").innerHTML = renderedHTML;
    };
    reader.readAsText(fileInput.files[0]);
}
</script>
</body>
</html>
